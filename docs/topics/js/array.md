# 第3章 数组

## 1、创建数组

### （1）字面量方法

```js
let count = [1,,'3'];
```

> 元素间通过逗号分隔，元素为空时表示`稀疏数组`。

### （2）拓展操作符

```js
let a = [1, 2, 3];
let b = [0, ...a, 4]; // [0, 1, 2, 3, 4]
```

数组字面量的拓展操作符适用于任何`可迭代对象`，是一种`浅拷贝`。

> 注意区别于之前的拓展操作符在对象字面量中拓展对象属性的用法。

### （3）Array() 构造函数

- `不传`参数创建空数组。
- 传`单个数值`参数指定数组长度。
- 传`多个`参数或`单个非数值`参数代表初始数组元素。

### （4）Array.of()

 `Array.of()` 和 `Array()` 构造函数之间的区别在于处理整数参数：

`Array.of(7)` 创建一个具有单个元素 **7** 的数组，而 `Array(7)`*创建一个长度为7的空数组（**注意：**这是指一个有7个空位的数组，而不是由7个`undefined`组成的数组）。

### （5）Array.from()

ES6新增**工厂函数**。传入`可迭代对象`或`类数组对象`生成数组，第二个参数可传入函数，数组的每个元素传入该函数，以返回值作为数组的实际元素。类似于后面提到的`map()`方法。

## 2、数组长度

数组长度通过`array.length`获取，对于稠密数组该值表示数组元素数量，对于稀疏数组则不是这样，下面介绍稀疏数组。

`稀疏数组`相当于包含`undefined`元素（稀疏项）的非稀疏数组。

```js
let a = [];
a[100] = 1;
a.length	// 101
a.length = 100
a[100]	// undefined
```

> 稀疏数组实际上是以一种压缩的形式存储的。

可以通过`push()`和`delete`添加和删除数组元素，注意delete不会影响数组长度，只是把删除元素换为`undefined`。

## 3、数组方法

迭代方法是指一系列能够顺序地对数组的每一元素进行操作的方法。传入的第一个参数都是一个操作函数，不会对稀疏数组中的`undefined`元素作用该函数。

- #### forEach()

最基本的迭代方法，无返回值。

```js
array1.forEach(element => console.log(element));
```

- #### map()

迭代每一个元素，把**函数返回值构成的数组作为方法的返回值**。

- #### filter()

是一种对数组的过滤方法，传入的是一个`断言函数`（即返回值为布尔值），方法的返回是所有经该函数后返回值为`true`的元素构成的数组。

- #### find()

查找方法，传入断言函数，**返回满足条件的第一个元素**。

同理**`findIndex()`**返回元素的索引值。

- #### every()、some()

断言方法，传入断言函数，返回值为布尔值。

- #### reduce()

归并方法，最终产生一个值，也称为注入（inject）和折叠（fold）。

```js
let a = [1,2,3,4,5];
a.reduce((x,y)=>x+y, 0);	// 15
```

接受两个参数，第一个为归并函数，第二个为初始归并值。省略第二个参数时以第一个数组元素作为初始归并值。

可以使用`reduceRight()`方法从右向左归并。

- #### flat()

  `flat()` 方法会按照一个可指定的深度递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回。

  ```js
  const arr2 = [0, 1, 2, [[[3, 4]]]];
  console.log(arr2.flat(2));
  // expected output: [0, 1, 2, [3, 4]]
  ```

  > 递归深度即为去掉的内层中括号的层数。

- #### concat()

- #### push()

- #### pop()

- #### shift()

  前置pop。

- #### unshift()

  每次在`head`位置`push`元素。

  > 可以用于`反转链表`！

- #### slice()

  `切片`。

- #### splice()

  可**同时执行**删除和插入操作。

  第一个参数为删除起始位置，第二个参数为删除长度，后面可选参数代表从第一个参数开始插入的各元素。返回删除的内容组成的数组，影响会作用于原数组。

  > `vue2`无法监听通过索引对数组的修改。除了`Vue.set()`以外还能使用`splice()`，因为已经重写了该方法。

- #### fill()

  快速`填充`方法，第一个参数为填充元素，后两个可选参数指定填充范围，不指定默认全部填充。

- #### includes()

  检测数组元素。

- #### join()

  拼接数组为字符串，是`split()`的反函数。

- #### concat()

  合并数组。

- #### reverse()

- #### sort()

  就地`排序`，返回排序后数组，默认按照字典序排序（非字符串默认转化为字符串），可传入比较函数，以**第一个参数小于第二个参数时返回小于零的值**为比较标准。

  



