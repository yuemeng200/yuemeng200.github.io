(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{489:function(s,t,a){"use strict";a.r(t);var e=a(56),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"第-3-章-安全"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第-3-章-安全"}},[s._v("#")]),s._v(" 第 3 章 安全")]),s._v(" "),a("h2",{attrs:{id:"_1、csrf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、csrf"}},[s._v("#")]),s._v(" 1、CSRF")]),s._v(" "),a("p",[a("code",[s._v("跨站请求伪造")]),s._v("（CSRF）是一种冒充受信任用户，向服务器发送非预期请求的攻击方式。")]),s._v(" "),a("p",[s._v("举例：")]),s._v(" "),a("p",[a("strong",[s._v("非法网站 b")]),s._v("内嵌访问"),a("strong",[s._v("合法网站 a")]),s._v("接口的"),a("code",[s._v("<script>")]),s._v("、"),a("code",[s._v("<img>")]),s._v("标签（form 表单亦可，只要不受跨域限制即可），且同时网站 a 的身份验证信息已经存在于浏览器的 cookie 中，那就会带着该 cookie 访问网站 a，实现注销用户、转账等危险操作。")]),s._v(" "),a("p",[s._v("举例：")]),s._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("img")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://www.example.com/index.php?action=delete&id=123"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n")])])]),a("p",[s._v("预防措施：")]),s._v(" "),a("ul",[a("li",[s._v("RESTful API")]),s._v(" "),a("li",[s._v("token")])]),s._v(" "),a("h2",{attrs:{id:"_2、xss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、xss"}},[s._v("#")]),s._v(" 2、XSS")]),s._v(" "),a("p",[a("code",[s._v("跨站脚本")]),s._v("（Cross-site scripting，通常简称为 XSS）是一种网站应用程序的安全漏洞攻击，是代码注入的一种。它允许恶意用户将代码注入到网页上，其他用户在观看网页时就会运行代码。")]),s._v(" "),a("ul",[a("li",[s._v("窃取 Cookie（document.cookie）")]),s._v(" "),a("li",[s._v("监听用户行为（addEventListener）")]),s._v(" "),a("li",[s._v("伪造 dom")]),s._v(" "),a("li",[s._v("浮窗广告")])]),s._v(" "),a("p",[s._v("举例：")]),s._v(" "),a("p",[s._v("用户在合法网站 a 的评论区输入"),a("code",[s._v("<script>")]),s._v("脚本，如果后端不对该评论检查而直接当作一般评论在页面展示，该评论内容就会作为 js 脚本运行，可以通过"),a("code",[s._v("document.cookie")]),s._v("拿到用户隐私内容，然后创建个指向非法站点的隐藏的"),a("code",[s._v("<iframe>")]),s._v("，并通过拼接 url 的方式把数据发出去。")]),s._v(" "),a("p",[s._v("类别：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("存储型：注入到数据库")])]),s._v(" "),a("li",[a("p",[s._v("反射型：注入到服务器")])]),s._v(" "),a("li",[a("p",[s._v("基于 DOM：注入到 HTMl\n预防措施：")])]),s._v(" "),a("li",[a("p",[s._v("输入检测")])]),s._v(" "),a("li",[a("p",[s._v("HttpOnly：js 无法操作 cookie")])])]),s._v(" "),a("h2",{attrs:{id:"_3、sql-注入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、sql-注入"}},[s._v("#")]),s._v(" 3、sql 注入")]),s._v(" "),a("p",[s._v("后端对用户登录验证返回用户信息的场景：")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" sql "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SELECT * FROM user_table WHERE username=\'"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"' AND password='\"")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" password "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\'"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("当前端传过来的用户名为"),a("code",[s._v("'or 1=1 --")]),s._v("，密码任意时。上面的 sql 语句填充结果如下：")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" user_table "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--'AND password=‘...")]),s._v("\n")])])]),a("p",[s._v("此时所有用户信息全部泄露。")]),s._v(" "),a("p",[s._v("预防措施：")]),s._v(" "),a("ul",[a("li",[s._v("sql 预编译")])])])}),[],!1,null,null,null);t.default=r.exports}}]);