<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第 1 章 基础知识 | yuemeng</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" href="/favicon.svg">
    <script src="/scripts/scrollToHash.js"></script>
    <meta name="description" content="Truelove always keeps one upward.">
    
    <link rel="preload" href="/assets/css/0.styles.6ab8e904.css" as="style"><link rel="preload" href="/assets/js/app.23af4f8e.js" as="script"><link rel="preload" href="/assets/js/2.8245e366.js" as="script"><link rel="preload" href="/assets/js/71.3832e890.js" as="script"><link rel="prefetch" href="/assets/js/10.b731082b.js"><link rel="prefetch" href="/assets/js/11.a8998e29.js"><link rel="prefetch" href="/assets/js/12.7ced28c9.js"><link rel="prefetch" href="/assets/js/13.59948214.js"><link rel="prefetch" href="/assets/js/14.6eed094b.js"><link rel="prefetch" href="/assets/js/15.bdd23837.js"><link rel="prefetch" href="/assets/js/16.8f09b1ee.js"><link rel="prefetch" href="/assets/js/17.f9196f7b.js"><link rel="prefetch" href="/assets/js/18.951efc07.js"><link rel="prefetch" href="/assets/js/19.dfb2c090.js"><link rel="prefetch" href="/assets/js/20.e8c16194.js"><link rel="prefetch" href="/assets/js/21.69a566d9.js"><link rel="prefetch" href="/assets/js/22.bde7f5f1.js"><link rel="prefetch" href="/assets/js/23.ae57625d.js"><link rel="prefetch" href="/assets/js/24.01f2e1c7.js"><link rel="prefetch" href="/assets/js/25.7123bbc5.js"><link rel="prefetch" href="/assets/js/26.a1fe3f93.js"><link rel="prefetch" href="/assets/js/27.0270ec08.js"><link rel="prefetch" href="/assets/js/28.c8139e8e.js"><link rel="prefetch" href="/assets/js/29.55bb450c.js"><link rel="prefetch" href="/assets/js/3.bc4bb25b.js"><link rel="prefetch" href="/assets/js/30.e2dcd03c.js"><link rel="prefetch" href="/assets/js/31.de6c71bc.js"><link rel="prefetch" href="/assets/js/32.ca7897d7.js"><link rel="prefetch" href="/assets/js/33.0a7d730d.js"><link rel="prefetch" href="/assets/js/34.70e24e03.js"><link rel="prefetch" href="/assets/js/35.cff91e8e.js"><link rel="prefetch" href="/assets/js/36.b063b734.js"><link rel="prefetch" href="/assets/js/37.93db3e13.js"><link rel="prefetch" href="/assets/js/38.a9ba8711.js"><link rel="prefetch" href="/assets/js/39.d47b1ea5.js"><link rel="prefetch" href="/assets/js/4.1e7f1a77.js"><link rel="prefetch" href="/assets/js/40.71969cdf.js"><link rel="prefetch" href="/assets/js/41.80f34865.js"><link rel="prefetch" href="/assets/js/42.837eea89.js"><link rel="prefetch" href="/assets/js/43.fc672528.js"><link rel="prefetch" href="/assets/js/44.b9e830ee.js"><link rel="prefetch" href="/assets/js/45.cb29c63c.js"><link rel="prefetch" href="/assets/js/46.7e468953.js"><link rel="prefetch" href="/assets/js/47.5658515b.js"><link rel="prefetch" href="/assets/js/48.bbeeff51.js"><link rel="prefetch" href="/assets/js/49.e4fa4ba0.js"><link rel="prefetch" href="/assets/js/5.0b264b5b.js"><link rel="prefetch" href="/assets/js/50.209dc5d8.js"><link rel="prefetch" href="/assets/js/51.e7020944.js"><link rel="prefetch" href="/assets/js/52.73a21f92.js"><link rel="prefetch" href="/assets/js/53.10494b32.js"><link rel="prefetch" href="/assets/js/54.bb0c9240.js"><link rel="prefetch" href="/assets/js/55.7a601fa5.js"><link rel="prefetch" href="/assets/js/56.326f953a.js"><link rel="prefetch" href="/assets/js/57.2176c2f9.js"><link rel="prefetch" href="/assets/js/58.32d94b04.js"><link rel="prefetch" href="/assets/js/59.5ddbdd69.js"><link rel="prefetch" href="/assets/js/6.dbd42f2c.js"><link rel="prefetch" href="/assets/js/60.54343175.js"><link rel="prefetch" href="/assets/js/61.0cfca0f1.js"><link rel="prefetch" href="/assets/js/62.24d71107.js"><link rel="prefetch" href="/assets/js/63.12110581.js"><link rel="prefetch" href="/assets/js/64.807887cf.js"><link rel="prefetch" href="/assets/js/65.a707b1e8.js"><link rel="prefetch" href="/assets/js/66.c168c117.js"><link rel="prefetch" href="/assets/js/67.94c402f9.js"><link rel="prefetch" href="/assets/js/68.6c1e6471.js"><link rel="prefetch" href="/assets/js/69.bf84ace2.js"><link rel="prefetch" href="/assets/js/7.2f00b58d.js"><link rel="prefetch" href="/assets/js/70.c94e218a.js"><link rel="prefetch" href="/assets/js/72.93bf1101.js"><link rel="prefetch" href="/assets/js/73.efc603f6.js"><link rel="prefetch" href="/assets/js/74.efe1e68e.js"><link rel="prefetch" href="/assets/js/75.79b7ac10.js"><link rel="prefetch" href="/assets/js/76.921d6ff3.js"><link rel="prefetch" href="/assets/js/77.78217ea1.js"><link rel="prefetch" href="/assets/js/78.ea400738.js"><link rel="prefetch" href="/assets/js/8.0e09ab2f.js"><link rel="prefetch" href="/assets/js/9.449ad5b3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6ab8e904.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.svg" alt="yuemeng" class="logo"> <span class="site-name can-hide">yuemeng</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术专题" class="dropdown-title"><span class="title">前端技术专题</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端技术专题" class="mobile-dropdown-title"><span class="title">前端技术专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/topics/js/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/topics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/topics/ts/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/topics/vue/" class="nav-link router-link-active">
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/topics/broswer/" class="nav-link">
  浏览器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/leetcode/" class="nav-link">
  题解
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/summary/" class="nav-link">
  总结
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他专题" class="dropdown-title"><span class="title">其他专题</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他专题" class="mobile-dropdown-title"><span class="title">其他专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/node/" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/others/rust/" class="nav-link">
  rust
</a></li><li class="dropdown-item"><!----> <a href="/others/electron/" class="nav-link">
  Electron
</a></li><li class="dropdown-item"><!----> <a href="/others/nest/" class="nav-link">
  Nest.js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机科学" class="dropdown-title"><span class="title">计算机科学</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机科学" class="mobile-dropdown-title"><span class="title">计算机科学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cs/cp/" class="nav-link">
  编译原理
</a></li><li class="dropdown-item"><!----> <a href="/cs/os/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/cs/cn.html" class="nav-link">
  计算机网络
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="/thoughts/" class="nav-link">
  随想
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术专题" class="dropdown-title"><span class="title">前端技术专题</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端技术专题" class="mobile-dropdown-title"><span class="title">前端技术专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/topics/js/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/topics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/topics/ts/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/topics/vue/" class="nav-link router-link-active">
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/topics/broswer/" class="nav-link">
  浏览器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/leetcode/" class="nav-link">
  题解
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/summary/" class="nav-link">
  总结
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他专题" class="dropdown-title"><span class="title">其他专题</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他专题" class="mobile-dropdown-title"><span class="title">其他专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/node/" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/others/rust/" class="nav-link">
  rust
</a></li><li class="dropdown-item"><!----> <a href="/others/electron/" class="nav-link">
  Electron
</a></li><li class="dropdown-item"><!----> <a href="/others/nest/" class="nav-link">
  Nest.js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机科学" class="dropdown-title"><span class="title">计算机科学</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机科学" class="mobile-dropdown-title"><span class="title">计算机科学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cs/cp/" class="nav-link">
  编译原理
</a></li><li class="dropdown-item"><!----> <a href="/cs/os/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/cs/cn.html" class="nav-link">
  计算机网络
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="/thoughts/" class="nav-link">
  随想
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/topics/vue/" aria-current="page" class="sidebar-link">Vue.js</a></li><li><a href="/topics/vue/1-basic.html" aria-current="page" class="active sidebar-link">第 1 章 基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_1、语言规范" class="sidebar-link">1、语言规范</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_2、指令" class="sidebar-link">2、指令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_1-基本指令" class="sidebar-link">(1) 基本指令</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_2-说明" class="sidebar-link">(2) 说明</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_3-修饰符" class="sidebar-link">(3) 修饰符</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_4-自定义指令" class="sidebar-link">(4) 自定义指令</a></li></ul></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_3、事件" class="sidebar-link">3、事件</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_4、生命周期" class="sidebar-link">4、生命周期</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_5、computed-和-watch" class="sidebar-link">5、computed 和 watch</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_6、组件" class="sidebar-link">6、组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_1-组件注册和使用" class="sidebar-link">(1) 组件注册和使用</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_2-组件通信" class="sidebar-link">(2) 组件通信</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_3-插槽" class="sidebar-link">(3) 插槽</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_4-动态组件" class="sidebar-link">(4) 动态组件</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_5-递归组件" class="sidebar-link">(5) 递归组件</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_6-混入" class="sidebar-link">(6) 混入</a></li></ul></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_7、class-和-style" class="sidebar-link">7、class 和 style</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_1-绑定-class" class="sidebar-link">(1) 绑定 class</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_2-绑定内联-style" class="sidebar-link">(2) 绑定内联 style</a></li></ul></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_8、过渡-动画-vue" class="sidebar-link">8、过渡 &amp; 动画 vue</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_9、补充" class="sidebar-link">9、补充</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_1-开发插件" class="sidebar-link">(1) 开发插件</a></li></ul></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#问题" class="sidebar-link">问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_1-为什么-data-非要是函数不可" class="sidebar-link">(1) 为什么 data 非要是函数不可？</a></li><li class="sidebar-sub-header"><a href="/topics/vue/1-basic.html#_2-v-model-的实现机制" class="sidebar-link">(2) v-model 的实现机制？</a></li></ul></li></ul></li><li><a href="/topics/vue/2-router.html" class="sidebar-link">第 2 章 vue-router</a></li><li><a href="/topics/vue/3-store.html" class="sidebar-link">第 3 章 vuex</a></li><li><a href="/topics/vue/4-theory.html" class="sidebar-link">第 4 章 进入 vue 原理</a></li><li><a href="/topics/vue/5-cli.html" class="sidebar-link">第5章 CLI 构建工具</a></li><li><a href="/topics/vue/6-tools.html" class="sidebar-link">第 6 章 常用依赖</a></li><li><a href="/topics/vue/7-other.html" class="sidebar-link">第 7 章 其他技术</a></li><li><a href="/topics/vue/8-vue3.html" class="sidebar-link">第 8 章 vue3</a></li><li><a href="/topics/vue/9-vite.html" class="sidebar-link">第 9 章 Vite</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第-1-章-基础知识"><a href="#第-1-章-基础知识" class="header-anchor">#</a> 第 1 章 基础知识</h1> <blockquote><p>准确地说这完全称不上一份标准的入门教程，只是对其中比较关键的和容易出错的内容进行解释。需要查看详尽文档请移步<a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer">vue 官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="_1、语言规范"><a href="#_1、语言规范" class="header-anchor">#</a> 1、语言规范</h2> <p>总结<code>vue</code>的基本语法规则能减少写出常见的 bug 以及快速与其他框架相区分。</p> <ul><li>在<code>template</code>中使用<code>vm</code>实例上的内容不需要<code>this</code>，在<code>script</code>中需要。</li> <li>vue 的指令为<code>v-directive=&quot;value&quot;</code>或者<code>v-directive:argument=&quot;value&quot;</code>的格式。`。</li> <li>标签的属性中需要写变量时必须使用<code>v-bind</code>，值的最外层引号是语法规定，不是字符意义的引号。</li> <li>data 是个函数，不是对象。</li> <li>不要给实例选项传递箭头函数。</li> <li>vue 响应式只包含实例创建时就存在的数据及其属性。</li> <li>需要时尽量使用<code>&lt;template/&gt;</code>，生成的代码中不会包含该元素。</li></ul> <h2 id="_2、指令"><a href="#_2、指令" class="header-anchor">#</a> 2、指令</h2> <h3 id="_1-基本指令"><a href="#_1-基本指令" class="header-anchor">#</a> (1) 基本指令</h3> <ul><li>v-if</li> <li>v-for</li> <li>v-model</li> <li>v-show</li> <li>v-html</li> <li>v-bind</li> <li>v-on</li> <li>v-text</li> <li>v-slot</li> <li>v-pre</li> <li>v-cloak</li> <li>v-once</li></ul> <h3 id="_2-说明"><a href="#_2-说明" class="header-anchor">#</a> (2) 说明</h3> <ul><li>v-bind:[动态参数]=&quot;value&quot;可用。</li> <li>v-on:&lt;动作&gt;.&lt;修饰符&gt;可用。</li> <li><code>v-if</code>直接控制 dom 元素是否被生成，而<code>v-show</code>只是控制<code>display</code>属性，切换时不卸载组件实例(而<code>visibility: hidden</code>只是视觉上不可见，保持原来位置)。详情可查看：<a href="https://vue3js.cn/interview/vue/show_if.html#%E4%B8%89%E3%80%81v-show%E4%B8%8Ev-if%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90" target="_blank" rel="noopener noreferrer">v-if 与 v-show<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>vue 会尽量高效地复用元素，可以给元素声明不同的<code>key</code>来强制替换。可以使用改变<code>key</code>的方式强制重新加载子组件。</li> <li><code>v-for</code>的标准格式：<code>&lt;li v-for=&quot;(item, index) in items&quot; :key=&quot;item.key&quot;&gt;&lt;/li&gt;</code>，也能遍历对象。</li> <li>我们可能会需要有选择地使用<code>v-for</code>内容，不要把<code>v-if</code>与之写在同一元素上，使用<code>template</code>。</li> <li><code>v-on</code>给调用方法传递特殊变量<code>$event</code>，访问原始的<code>dom事件</code>。</li></ul> <h3 id="_3-修饰符"><a href="#_3-修饰符" class="header-anchor">#</a> (3) 修饰符</h3> <h4 id="_1-表单修饰符"><a href="#_1-表单修饰符" class="header-anchor">#</a> ① 表单修饰符</h4> <p><code>v-model</code>修饰符：</p> <ul><li><p><code>.lazy</code>：使得<code>视图-&gt;状态</code>的同步在<code>change</code>时而不是<code>input</code>时触发。</p></li> <li><p><code>.number</code>：使得输入转化为数值来同步。</p></li> <li><p><code>.trim</code>：使得自动过滤输入的首尾空白字符。</p></li></ul> <h4 id="_2-事件修饰符"><a href="#_2-事件修饰符" class="header-anchor">#</a> ② 事件修饰符</h4> <ul><li>stop：阻止事件冒泡。</li> <li>prevent：阻止默认行为。</li> <li>self：只在 event.target 是自身时触发。
<blockquote><p>使用修饰符时，顺序很重要；相应的代码会以同样的顺序产生。因此，用 v-on:click.prevent.self 会阻止所有的点击，而 v-on:click.self.prevent 只会阻止对元素自身的点击</p></blockquote></li> <li>once：事件只触发一次。</li> <li>capture：事件响应从冒泡改为捕获。</li> <li>passtive：相当于对<code>onscroll</code>事件节流处理。
<blockquote><p>节流（）指在事件触发时重置倒计时，倒计时结束后响应。
防抖（debounce）指在响应后设置倒计时，倒计时结束前不再响应，且事件触发重置倒计时。</p></blockquote></li> <li>native：监听组件原生事件，默认监听自定义事件。</li></ul> <h4 id="_3-按键事件修饰符"><a href="#_3-按键事件修饰符" class="header-anchor">#</a> ③ 按键事件修饰符</h4> <p>修饰<code>click</code>鼠标事件：</p> <ul><li>left</li> <li>right</li> <li>middle
修饰<code>key</code>按键事件：</li> <li>keyup.enter</li> <li>keydown.esc</li> <li>...</li></ul> <h4 id=""><a href="#" class="header-anchor">#</a></h4> <h3 id="_4-自定义指令"><a href="#_4-自定义指令" class="header-anchor">#</a> (4) 自定义指令</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 注册一个全局自定义指令 `v-focus`</span>
Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;focus&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 当被绑定的元素插入到 DOM 中时……</span>
  <span class="token function-variable function">inserted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 聚焦元素</span>
    el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>除此之外，也能通过<code>directives</code>选项定义局部指令。</p> <h2 id="_3、事件"><a href="#_3、事件" class="header-anchor">#</a> 3、事件</h2> <p>使用<code>v-on</code>可以在组件上，注意默认会传递<code>$event</code>给处理方法，只需要占位获取即可。
同时还有其他几种手动处理的实例属性：</p> <ul><li><code>$on</code>：用来手动绑定事件</li> <li><code>$once</code>：绑定事件一次</li> <li><code>$off</code>：解除绑定</li></ul> <p>考虑如下一个场景，我们需要在组件摧毁前释放第三方库对象：
可以直接在生命周期钩子执行，但此时的缺点是必须把临时使用的对象挂载到<code>data</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 一次性将这个日期选择器附加到一个输入框上</span>
<span class="token comment">// 它会被挂载到 DOM 上。</span>
<span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Pikaday 是一个第三方日期选择器的库</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>picker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pikaday</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>input<span class="token punctuation">,</span>
    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">'YYYY-MM-DD'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 在组件被销毁之前，</span>
<span class="token comment">// 也销毁这个日期选择器。</span>
<span class="token function-variable function">beforeDestroy</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>picker<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这时候就可以使用<code>$once</code>来解决：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> picker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pikaday</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>input<span class="token punctuation">,</span>
    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">'YYYY-MM-DD'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$once</span><span class="token punctuation">(</span><span class="token string">'hook:beforeDestroy'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    picker<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>还有注册和清除定时器的场景：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$once</span><span class="token punctuation">(</span><span class="token string">'hook:beforeDestroy'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4、生命周期"><a href="#_4、生命周期" class="header-anchor">#</a> 4、生命周期</h2> <ul><li>初始化阶段：实例初始化执行环境，完成后触发<code>beforeCreate</code>。之后将<code>data</code>注入到响应式系统中，并设置<code>watch</code>、<code>methods</code>和<code>computed</code>等实例选项，完成后触发<code>created</code>；</li> <li>模板编译和挂载阶段：首先将模板解析为<code>render</code>函数（AST 树），完成后触发<code>beforeMount</code>。（🔔 注意此时如果有子组件，开始触发子组件实例的生命周期，以此类推，因为父组件依赖子组件，子组件不准备好父组件无法生成虚拟 dom）之后通过<code>h()</code>函数将实例中的数据上树，此时就生成了<code>VNode</code>，即虚拟 dom，它是 dom 结构的一种简化表示，有利于响应式依赖的收集和变更通知，同时也利于后续的<code>diff</code>操作。之后将虚拟 dom 转化为真实 dom，即<code>this.$el</code>，并取代<code>el</code>选项指定的真实 dom。完成后触发<code>mounted</code>。</li> <li>更新阶段：当状态发生改变，触发<code>beforeUpdate</code>，通知依赖变更状态，生成新的虚拟 dom，对比变更前后的虚拟 dom，最小量更新真实 dom 元素。完成后触发<code>updated</code></li> <li>销毁阶段：当组件销毁时首先触发<code>beforeDestory</code>，此钩子函数应该进行一些自定义对象清理，之后会自动清理实例选项，并等待子组件摧毁结束，以此类推。全部完成才会触发<code>destoryed</code>。</li></ul> <img src="https://cn.vuejs.org/images/lifecycle.png" alt="实例声明周期" style="zoom:50%;"> <h2 id="_5、computed-和-watch"><a href="#_5、computed-和-watch" class="header-anchor">#</a> 5、computed 和 watch</h2> <p>因为在模板中写表达式难以维护和复用，且 vue 本身不支持复杂的插值运算。此时可以借助<code>method</code>来实现，但性能上还是计算属性更好些，因为<strong>计算属性是基于它们的响应式依赖进行缓存的</strong>。只在相关响应式依赖发生改变时它们才会重新求值。</p> <blockquote><p>如果该计算属性依赖的内容不是响应式依赖，则不会自动触发更新计算操作，如<code>Date.now()</code>等。</p></blockquote> <p>而<code>watch</code>是的功能在于监听。</p> <p>⚠️ 注意<code>watch</code>默认无法深度监听，只有监听的对象重新赋值才会触发，可以手动开启深度监听：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token operator">...</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>当被监听的对象被修改时，深度监听会起作用，但是却无法获取<code>oldVal</code>，一种可行的方案是把监听的对象序列化为<code>computed</code>，再去监听该<code>computed</code>，可参考<a href="https://blog.csdn.net/qq_35859392/article/details/107552326" target="_blank" rel="noopener noreferrer">这篇文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></blockquote> <h2 id="_6、组件"><a href="#_6、组件" class="header-anchor">#</a> 6、组件</h2> <h3 id="_1-组件注册和使用"><a href="#_1-组件注册和使用" class="header-anchor">#</a> (1) 组件注册和使用</h3> <p>全局注册使用<code>Vue.component('my-component-name', {})</code>，注意一定在实例创建前就注册。局部注册使用<code>components</code>选项。</p> <blockquote><p>当使用<code>PascalCase</code>注册一个组件名时，可以使用<code>PascalCase</code>和<code>kebab-case</code>两种方式在模板中引用组件。关于在模板传递<code>props</code>时，官方网站说只能用<code>kebab-case</code>，但我用<code>camelCased</code>也没发现问题，这点暂时存疑。</p></blockquote> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>要注意区分<code>注册组件名</code>、<code>定义组件名</code>和<code>路由别名</code>。定义组件名在使用<code>vue-devtool</code>调试时显示，<code>路由别名</code>用于快捷路由快捷引用。</p></div> <p>补充一个目录下组件全局注册的的方案：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> upperFirst <span class="token keyword">from</span> <span class="token string">&quot;lodash/upperFirst&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> camelCase <span class="token keyword">from</span> <span class="token string">&quot;lodash/camelCase&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> requireComponent <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>
  <span class="token comment">// 其组件目录的相对路径</span>
  <span class="token string">&quot;./components&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 是否查询其子目录</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 匹配基础组件文件名的正则表达式</span>
  <span class="token operator">/</span>Base<span class="token punctuation">[</span><span class="token constant">A</span><span class="token operator">-</span><span class="token constant">Z</span><span class="token punctuation">]</span>\w<span class="token operator">+</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>vue<span class="token operator">|</span>js<span class="token punctuation">)</span>$<span class="token operator">/</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

requireComponent<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fileName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取组件配置</span>
  <span class="token keyword">const</span> componentConfig <span class="token operator">=</span> <span class="token function">requireComponent</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 获取组件的 PascalCase 命名</span>
  <span class="token keyword">const</span> componentName <span class="token operator">=</span> <span class="token function">upperFirst</span><span class="token punctuation">(</span>
    <span class="token function">camelCase</span><span class="token punctuation">(</span>
      <span class="token comment">// 获取和目录深度无关的文件名</span>
      fileName
        <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.\w+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 全局注册组件</span>
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>
    componentName<span class="token punctuation">,</span>
    <span class="token comment">// 如果这个组件选项是通过 `export default` 导出的，</span>
    <span class="token comment">// 那么就会优先使用 `.default`，</span>
    <span class="token comment">// 否则回退到使用模块的根。</span>
    componentConfig<span class="token punctuation">.</span>default <span class="token operator">||</span> componentConfig
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-组件通信"><a href="#_2-组件通信" class="header-anchor">#</a> (2) 组件通信</h3> <h4 id="props-和-emit"><a href="#props-和-emit" class="header-anchor">#</a> props 和 $emit</h4> <p>一般情况下，父-&gt;子 使用<code>props</code>，子-&gt;父 使用<code>$emit</code>和<code>$on</code>。不同数据类型的传递方式符合函数传参规则。</p> <p><code>props</code>传递的数据不建议在子组件中修改，可以使用<code>.sync</code>修饰，其相当于<code>bind</code>、<code>on</code>和<code>emit</code>流程的语法糖：</p> <div class="language-html extra-class"><pre class="language-html"><code>//父组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comp</span> <span class="token attr-name">:myMessage.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>comp</span><span class="token punctuation">&gt;</span></span>
//子组件 this.$emit('update:myMessage',params);
</code></pre></div><blockquote><p>注意这种时候 bind 后面不能写表达式，触发事件严格按照<code>update:eventName</code>的格式。</p></blockquote> <h4 id="特殊变量"><a href="#特殊变量" class="header-anchor">#</a> 特殊变量</h4> <p>使用<code>$root</code>访问根实例，使用<code>$parent</code>访问父组件，使用<code>$childen</code>访问子组件列表，使用<code>$refs.name</code>访问指定子元素。</p> <blockquote><p>⚠️ <code>$refs</code>不支持响应式。</p></blockquote> <h4 id="依赖注入"><a href="#依赖注入" class="header-anchor">#</a> 依赖注入</h4> <p><code>provide</code>和<code>inject</code>选项。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 祖先组件</span>
<span class="token function-variable function">provide</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">getMap</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>getMap
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 孩子组件</span>
<span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'getMap'</span><span class="token punctuation">]</span>
</code></pre></div><blockquote><p>不支持响应式</p></blockquote> <h4 id="attrs-和-listener"><a href="#attrs-和-listener" class="header-anchor">#</a> $attrs 和 $listener</h4> <p>当非<code>props</code>被声明在子组件时时，默认情况下这些属性将作为<code>dom属性</code>作用到子组件的根元素上，并会替换已有的属性（class 和 style 采取合并策略）。可以开启<code>inheritAttrs: false</code>选项阻止这种可能的破坏。此时传递的属性在子组件中可以通过<code>this.$attrs</code>获取。
显然这又是一种组件通信的方式，而且是多层次的，因为子组件还能通过<code>v-bind:$attrs</code>再传递给孙子组件。从而实现了从祖先到孩子的数据传递。
那么从孩子到祖先的通信该怎么实现呢？有个<code>$listeners</code>实例属性，其中保存有所有的父组件的监听器。通过在中间组件使用<code>v-on:$listener</code>中转祖先组件的监听器，就能在任意孩子组件中使用<code>$emit</code>直接触发。
可见这种方式是对多层级的<code>props</code>、<code>$emit</code>通信模式的简化，从效果上来看，实现的是<strong>祖先元素和所有子孙元素间</strong>的通信。</p> <h4 id="eventbus"><a href="#eventbus" class="header-anchor">#</a> EventBus</h4> <p>实质上 EventBus 是一个不具备 DOM 的组件，它具有的仅仅只是它实例方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 全局注册</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$EventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$EventBus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;onMsg&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 接收</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$EventBus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&quot;onMsg&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>之所以可以这样用的原因是因为<code>$emit</code>是在调用实例身上触发事件。</p></blockquote> <h3 id="_3-插槽"><a href="#_3-插槽" class="header-anchor">#</a> (3) 插槽</h3> <p>合理地拆分组件和用好插槽复用代码的关键。
在子组件中使用<code>&lt;slot&gt;</code>标签声明默认插槽，提供<code>name</code>属性声明具名插槽。</p> <h4 id="具名插槽"><a href="#具名插槽" class="header-anchor">#</a> 具名插槽</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-layout</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Here might be a page title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>A paragraph for the main content.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>And another one.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>footer</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Here's some contact info<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-layout</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>没有使用<code>v-slot</code>指令的内容占位默认插槽，其中<code>v-slot:</code>可简写为<code>#</code>。</p></blockquote> <h4 id="作用域插槽"><a href="#作用域插槽" class="header-anchor">#</a> 作用域插槽</h4> <p>插槽的填充内容默认无法访问子组件作用域的内容。
可以通过给<code>slot</code>标签使用<code>v-bind</code>指令向外暴露内容，之后父组件的填充内容使用对象来接收：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>current-user</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotProps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ slotProps.user.firstName }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>current-user</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>也可以使用更简洁的解构和重命名方式：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>current-user</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{user: person}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{ person.firstName }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>current-user</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_4-动态组件"><a href="#_4-动态组件" class="header-anchor">#</a> (4) 动态组件</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentTabComponent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>这其实是<code>v-if-else</code>的一种语法糖。
同理还有<code>v-show</code>的语法糖：</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 此时失活的组件状态将会被缓存！--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentTabComponent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>使用<code>keep-alive</code>后，内置组件会多出来两个生命周期：<code>activate</code>和<code>deactivate</code>。缓存的组件实例会被放在全局的<code>this.cache</code>中。</p> <h3 id="_5-递归组件"><a href="#_5-递归组件" class="header-anchor">#</a> (5) 递归组件</h3> <p>实现起来并不难，组件自己调用自己即可，注意这种情况下组件的<code>name</code>不可省略。标签名不能用<code>驼峰命名</code>而应该用<code>连接线</code>，标签属性要用<code>纯小写</code>，据说这是<code>W3C</code>的规范，但试了一下并没有影响。</p> <h3 id="_6-混入"><a href="#_6-混入" class="header-anchor">#</a> (6) 混入</h3> <p>混入 (mixin) 提供了一种非常灵活的方式，来分发 Vue 组件中的可复用功能。一个混入对象可以包含任意组件选项。当组件使用混入对象时，所有混入对象的选项将被“混合”进入该组件本身的选项。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义一个混入对象</span>
<span class="token keyword">var</span> myMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello from mixin!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 定义一个使用混入对象的组件</span>
<span class="token keyword">var</span> Component <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">mixins</span><span class="token operator">:</span> <span class="token punctuation">[</span>myMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;hello from mixin!&quot;</span>
</code></pre></div><blockquote><p><code>Vue.extend</code>用来定义 Vue 子类，声明的组件对象需要使用<code>el</code>选项或者<code>$mount</code>挂载到 dom 上使用，只是一种动态生成组件的方式，很多<code>message</code>组件就是这样生成的。
同名钩子函数将合并为一个数组，因此都将被调用。另外，混入对象的钩子将在组件自身钩子之前调用。</p></blockquote> <p>除此之外还能使用<code>Vue.mixin()</code>全局混入。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{ data.name }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>children<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>detailed-list</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in data.children<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>detailed-list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;DetailedList&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.children</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_7、class-和-style"><a href="#_7、class-和-style" class="header-anchor">#</a> 7、class 和 style</h2> <p><code>class</code>和<code>style</code>作为标签的属性，自然能够被<code>v-bind</code>修饰，但字符串拼接太麻烦，vue 专门增强了这种功能。</p> <h3 id="_1-绑定-class"><a href="#_1-绑定-class" class="header-anchor">#</a> (1) 绑定 class</h3> <p><code>对象语法</code>用于动态添加和移除，<code>数组语法</code>用于动态切换。</p> <h4 id="对象语法"><a href="#对象语法" class="header-anchor">#</a> 对象语法</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">v-bind:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ active: isActive, <span class="token punctuation">'</span>text-danger<span class="token punctuation">'</span>: hasError }<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>此时<code>isActive</code>变量决定<code>active</code>这个 class 的添加。</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[isActive ? activeClass : <span class="token punctuation">'</span><span class="token punctuation">'</span>, errorClass]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>此时<code>errorClass</code>的 class 值会被添加到标签上。</p></blockquote> <h3 id="_2-绑定内联-style"><a href="#_2-绑定内联-style" class="header-anchor">#</a> (2) 绑定内联 style</h3> <h4 id="对象语法-2"><a href="#对象语法-2" class="header-anchor">#</a> 对象语法</h4> <p>CSS property 名可以用驼峰式 (camelCase) 或短横线分隔 (kebab-case，记得用引号括起来) 来命名。注意原生内联写法相区分。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ color: activeColor, fontSize: fontSize + <span class="token punctuation">'</span>px<span class="token punctuation">'</span> }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="数组语法"><a href="#数组语法" class="header-anchor">#</a> 数组语法</h4> <p>数组语法可以将多个样式对象应用到同一个元素上</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[baseStyles, overridingStyles]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_8、过渡-动画-vue"><a href="#_8、过渡-动画-vue" class="header-anchor">#</a> 8、过渡 &amp; 动画 vue</h2> <p>提供了<code>transition</code>封装组件，这个相当于<code>vue</code>给组件使用 css
动效提供了一种更简单、强大的方式。 触发时机： - v-if - v-show - 动态组件 -
组件根节点 有一个常用的场景是<code>router-view</code>过渡使用，在 <code>vue2</code> 可以这样写：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transitionName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>router-view<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>注意要带上<code>key</code>，不然可能会失效，然后通过路由守卫可以动态地改变<code>transition</code>的<code>name</code>，达到多样化的过渡效果。
但在<code>vue3</code>这种方式不再支持了，要采用下面这种写法：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>router-view<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transitionName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>其实就是把从检测<code>router-view</code>移动到检测内部组件了，所以要把内部组件暴露到<code>component</code>身上去。</p> <h2 id="_9、补充"><a href="#_9、补充" class="header-anchor">#</a> 9、补充</h2> <h3 id="_1-开发插件"><a href="#_1-开发插件" class="header-anchor">#</a> (1) 开发插件</h3> <div class="language-js extra-class"><pre class="language-js"><code>MyPlugin<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Vue<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 添加全局方法或 property</span>
  Vue<span class="token punctuation">.</span><span class="token function-variable function">myGlobalMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 逻辑...</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 2. 添加全局资源</span>
  Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'my-directive'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">bind</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> oldVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 逻辑...</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 3. 注入组件选项</span>
  Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 逻辑...</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 4. 添加实例方法</span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$myMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">methodOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 逻辑...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Vue.use()</code>会自动执行插件对象的<code>install</code>方法。</p> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <h3 id="_1-为什么-data-非要是函数不可"><a href="#_1-为什么-data-非要是函数不可" class="header-anchor">#</a> (1) 为什么 data 非要是函数不可？</h3> <p>首先说明，<code>根vue实例</code>的 data 是可以直接写成一般对象的，因为根只存在一个，不会复用，而组件是会被复用的。为什么被复用就不行呢？原因如下：</p> <p>这和 vue 实例被创建的过程有关，vue 实例初始化后会把代码中<code>data</code>的内容作为属性添加到<code>vm</code>上，之后也会把函数之类的内容添加进来，所以我们才能通过<code>this.属性</code>的形式访问到。如果写成对象的形式，相同组件在多个位置使用会共享<code>data</code>，因为对象是<code>引用类型</code>，每次被挂载还是原来对象的引用。</p> <h3 id="_2-v-model-的实现机制"><a href="#_2-v-model-的实现机制" class="header-anchor">#</a> (2) v-model 的实现机制？</h3> <p><code>v-model</code>双向绑定是 vue 的语法糖，可以通过<code>v-bind</code>和<code>v-on</code>联合实现（指视图-&gt;数据方向）：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>等价于：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
  <span class="token attr-name"><span class="token namespace">v-bind:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchText<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">v-on:</span>input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchText = $event.target.value<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p><code>v-on</code>的值既能是<code>method</code>的名字，也能是单条语句，甚至是简单的箭头函数。</p></blockquote> <p>除此之外，自定义输入框组件也支持使用<code>v-model</code>语法糖，但需要在定义时就满足上述规则：</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;custom-input&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;input
      v-bind:value=&quot;value&quot;
      v-on:input=&quot;$emit('input', $event.target.value)&quot;
    &gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>再者我们还能修改<code>v-model</code>默认的行为，这对使用<code>select</code>、<code>radio</code>、<code>checkbox</code>等控件时有用：</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;base-checkbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">model</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token string">&quot;checked&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">checked</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;input
      type=&quot;checkbox&quot;
      v-bind:checked=&quot;checked&quot;
      v-on:change=&quot;$emit('change', $event.target.checked)&quot;
    &gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/6/2022, 4:42:20 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/topics/vue/" class="prev router-link-active">
        Vue.js
      </a></span> <span class="next"><a href="/topics/vue/2-router.html">
        第 2 章 vue-router
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.23af4f8e.js" defer></script><script src="/assets/js/2.8245e366.js" defer></script><script src="/assets/js/71.3832e890.js" defer></script>
  </body>
</html>
