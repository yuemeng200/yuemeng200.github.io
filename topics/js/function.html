<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第4章 函数 | yuemeng</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" href="/favicon.svg">
    <script src="/scripts/scrollToHash.js"></script>
    <meta name="description" content="满地都是六便士，捡干净以后，抬头看见了月亮。">
    
    <link rel="preload" href="/assets/css/0.styles.a871159c.css" as="style"><link rel="preload" href="/assets/js/app.3e77bb48.js" as="script"><link rel="preload" href="/assets/js/2.e6646181.js" as="script"><link rel="preload" href="/assets/js/26.77f5ed97.js" as="script"><link rel="prefetch" href="/assets/js/10.26a5d24d.js"><link rel="prefetch" href="/assets/js/11.abe02e29.js"><link rel="prefetch" href="/assets/js/12.9b7e3244.js"><link rel="prefetch" href="/assets/js/13.6b8a637e.js"><link rel="prefetch" href="/assets/js/14.02ef5dcd.js"><link rel="prefetch" href="/assets/js/15.8f1b9216.js"><link rel="prefetch" href="/assets/js/16.25c4811e.js"><link rel="prefetch" href="/assets/js/17.7b01c315.js"><link rel="prefetch" href="/assets/js/18.f02eab57.js"><link rel="prefetch" href="/assets/js/19.1f69dd54.js"><link rel="prefetch" href="/assets/js/20.009c055e.js"><link rel="prefetch" href="/assets/js/21.15b7ac4b.js"><link rel="prefetch" href="/assets/js/22.b4b936f7.js"><link rel="prefetch" href="/assets/js/23.913a1ed6.js"><link rel="prefetch" href="/assets/js/24.bffa56f4.js"><link rel="prefetch" href="/assets/js/25.4988fe0c.js"><link rel="prefetch" href="/assets/js/27.831210ba.js"><link rel="prefetch" href="/assets/js/28.9f73cfba.js"><link rel="prefetch" href="/assets/js/29.a7c8ca6d.js"><link rel="prefetch" href="/assets/js/3.ae9b890a.js"><link rel="prefetch" href="/assets/js/30.b6d7b1de.js"><link rel="prefetch" href="/assets/js/31.91a08ece.js"><link rel="prefetch" href="/assets/js/32.5ad1ae78.js"><link rel="prefetch" href="/assets/js/33.f3b0c2ca.js"><link rel="prefetch" href="/assets/js/4.a9930409.js"><link rel="prefetch" href="/assets/js/5.83dab69b.js"><link rel="prefetch" href="/assets/js/6.6b373152.js"><link rel="prefetch" href="/assets/js/7.8757b002.js"><link rel="prefetch" href="/assets/js/8.620411d0.js"><link rel="prefetch" href="/assets/js/9.b4b22fe5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a871159c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.svg" alt="yuemeng" class="logo"> <span class="site-name can-hide">yuemeng</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术专题" class="dropdown-title"><span class="title">前端技术专题</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端技术专题" class="mobile-dropdown-title"><span class="title">前端技术专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/topics/js/" class="nav-link router-link-active">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/topics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/topics/ts/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/topics/vue/" class="nav-link">
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/topics/broswer/" class="nav-link">
  浏览器
</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他专题" class="dropdown-title"><span class="title">其他专题</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他专题" class="mobile-dropdown-title"><span class="title">其他专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/node/" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/others/electron/" class="nav-link">
  Electron
</a></li><li class="dropdown-item"><!----> <a href="/others/nest/" class="nav-link">
  Nest.js
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="/thoughts/" class="nav-link">
  随想
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术专题" class="dropdown-title"><span class="title">前端技术专题</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端技术专题" class="mobile-dropdown-title"><span class="title">前端技术专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/topics/js/" class="nav-link router-link-active">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/topics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/topics/ts/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/topics/vue/" class="nav-link">
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/topics/broswer/" class="nav-link">
  浏览器
</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他专题" class="dropdown-title"><span class="title">其他专题</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他专题" class="mobile-dropdown-title"><span class="title">其他专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/node/" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/others/electron/" class="nav-link">
  Electron
</a></li><li class="dropdown-item"><!----> <a href="/others/nest/" class="nav-link">
  Nest.js
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="/thoughts/" class="nav-link">
  随想
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/topics/js/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/topics/js/basic.html" class="sidebar-link">第1章 基础部分</a></li><li><a href="/topics/js/object.html" class="sidebar-link">第2章 对象</a></li><li><a href="/topics/js/array.html" class="sidebar-link">第3章 数组</a></li><li><a href="/topics/js/function.html" aria-current="page" class="active sidebar-link">第4章 函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/js/function.html#_1、概述" class="sidebar-link">1、概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/js/function.html#_1-定义函数" class="sidebar-link">（1）定义函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/topics/js/function.html#_2、函数调用" class="sidebar-link">2、函数调用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/js/function.html#_1-作为函数调用" class="sidebar-link">（1）作为函数调用</a></li><li class="sidebar-sub-header"><a href="/topics/js/function.html#_2-作为方法调用" class="sidebar-link">（2）作为方法调用</a></li></ul></li><li class="sidebar-sub-header"><a href="/topics/js/function.html#_3、实参和形参" class="sidebar-link">3、实参和形参</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/js/function.html#_1-形参默认值" class="sidebar-link">（1）形参默认值</a></li><li class="sidebar-sub-header"><a href="/topics/js/function.html#_2-剩余形参" class="sidebar-link">（2）剩余形参</a></li><li class="sidebar-sub-header"><a href="/topics/js/function.html#_3-实参与形参的解构赋值" class="sidebar-link">（3）实参与形参的解构赋值</a></li></ul></li><li class="sidebar-sub-header"><a href="/topics/js/function.html#_4、函数属性" class="sidebar-link">4、函数属性</a></li><li class="sidebar-sub-header"><a href="/topics/js/function.html#_5、闭包" class="sidebar-link">5、闭包</a></li><li class="sidebar-sub-header"><a href="/topics/js/function.html#_6、函数属性、方法" class="sidebar-link">6、函数属性、方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topics/js/function.html#_1-属性" class="sidebar-link">（1）属性</a></li><li class="sidebar-sub-header"><a href="/topics/js/function.html#_2-方法" class="sidebar-link">（2）方法</a></li></ul></li></ul></li><li><a href="/topics/js/class.html" class="sidebar-link">第5章 类</a></li><li><a href="/topics/js/module.html" class="sidebar-link">第6章 模块</a></li><li><a href="/topics/js/api.html" class="sidebar-link">第7章 标准库</a></li><li><a href="/topics/js/iterator.html" class="sidebar-link">第8章 迭代器</a></li><li><a href="/topics/js/async.html" class="sidebar-link">第9章 异步编程</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第4章-函数"><a href="#第4章-函数" class="header-anchor">#</a> 第4章 函数</h1> <h2 id="_1、概述"><a href="#_1、概述" class="header-anchor">#</a> 1、概述</h2> <p>JavaScript的函数可以<code>嵌套定义</code>，很多奇怪的特性就是由此产生的。</p> <h3 id="_1-定义函数"><a href="#_1-定义函数" class="header-anchor">#</a> （1）定义函数</h3> <h4 id="_1-function-关键字声明"><a href="#_1-function-关键字声明" class="header-anchor">#</a> ① function 关键字声明</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div><p>这种定义方式称为<code>函数声明</code>（区别于后面的<code>函数表达式</code>），值得注意的是<strong>这种声明语句会被提升到其作用域块的顶部</strong>，即可以在定义之前使用函数。</p> <h4 id="_2-函数表达式"><a href="#_2-函数表达式" class="header-anchor">#</a> ② 函数表达式</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">fact</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div><p>即把函数赋值给常量或变量，此时的函数名是可以省略的（常常省略），使用如上的<code>f()</code>来调用函数。</p> <p>注意此时就没有语句提升的说法，因为<strong>赋值是发生在程序解释执行阶段，编译时并不知道有这个函数</strong>。</p> <h4 id="_3-箭头函数"><a href="#_3-箭头函数" class="header-anchor">#</a> ③ 箭头函数</h4> <p>是一种简洁的函数定义语法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>如果函数体仅一个return语句，return关键字和花括号都可以省略。但如果返回的是一个对象字面量时就不应该省略（引发歧义），或者把这个函数体放在圆括号内。</li> <li>如果箭头函数仅一个参数，参数列表的圆括号也能省略。</li></ul> <p>箭头函数另一个极其重要的区别是<strong>它会从定义自己的环境继承<code>this关键字</code>的指向</strong>，在后面详细介绍。</p> <h4 id="_4-嵌套函数"><a href="#_4-嵌套函数" class="header-anchor">#</a> ④ 嵌套函数</h4> <p>JavaScript中函数可以嵌套在其它函数内部，可以访问包含自己的函数以及所有更外层函数的参数和变量。</p> <h2 id="_2、函数调用"><a href="#_2、函数调用" class="header-anchor">#</a> 2、函数调用</h2> <h3 id="_1-作为函数调用"><a href="#_1-作为函数调用" class="header-anchor">#</a> （1）作为函数调用</h3> <p>非严格模式下的函数调用，调用上下文（this值）是<strong>全局对象</strong>。</p> <h3 id="_2-作为方法调用"><a href="#_2-作为方法调用" class="header-anchor">#</a> （2）作为方法调用</h3> <p>方法中的this永远指向方法的调用者。在复杂情境下涉及this指向问题时，<strong>首先判断this所在的函数的调用方式</strong>。</p> <blockquote><p>如果方法返回的值是对象，则可以继续调用该对象的其他方法，看起来像是一种链式结构，称为<code>方法作用链</code>。<strong>我们自己在给对象定义不需要返回内容的方法时可以考虑返回this，这样就支持了这种方法作用链编程风格。</strong></p></blockquote> <p>下面考虑嵌套函数在被嵌套函数中被调用时this指向的问题：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">m</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// false</span>
</code></pre></div><p>此时嵌套函数作为函数被调用，指向为全局对象，这常常与我们的期望不符，可以通过以下方法解决：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">m</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>self <span class="token operator">===</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// true</span>
</code></pre></div><p>这里我们<strong>把原来的this临时绑定在另一个名字上</strong>，通过这个名字访问就没有问题了。</p> <p>除此之外也能通过<code>箭头函数</code>解决该问题：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">m</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> o<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// true</span>
</code></pre></div><p>这是因为<strong>箭头函数中的this始终继承其上下文中的this，与调用方式无关。</strong></p> <h2 id="_3、实参和形参"><a href="#_3、实参和形参" class="header-anchor">#</a> 3、实参和形参</h2> <p>JavaScript的函数定义不会指定参数的类型，传入实参时也不做任何检查，事实上连传入的参数个数都不检查。</p> <h3 id="_1-形参默认值"><a href="#_1-形参默认值" class="header-anchor">#</a> （1）形参默认值</h3> <p>当传入的实参个数少于形参个数时，额外的形参获得默认值，通常是<code>undefined</code>，也可在定义时指定默认值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-剩余形参"><a href="#_2-剩余形参" class="header-anchor">#</a> （2）剩余形参</h3> <p>剩余形参允许我们传入多余形参数量的实参。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token parameter">first<span class="token operator">=</span><span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token operator">...</span>rest</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> maxValue <span class="token operator">=</span> first<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> n <span class="token keyword">of</span> rest<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">&gt;</span>maxValue<span class="token punctuation">)</span>
            maxValue <span class="token operator">=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> maxValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 20</span>
</code></pre></div><p>多余的实参作为数组形式传入，这个机制十分有用。</p> <blockquote><p>前面学习过拓展操作符在对象和数组字面量中的用法，这次是在函数形参中用法，注意区分。</p> <p>事实上在函数调用时传入的实参也可使用拓展操作符形式。</p></blockquote> <blockquote><p>其实就算不使用<code>剩余形参</code>这种定义形式也能传入多余的实参，在函数内部有一个<code>arguments</code>的类数组对象，通过它可以访问的传入的所有实参。但效率较低，已不推荐使用。</p></blockquote> <h3 id="_3-实参与形参的解构赋值"><a href="#_3-实参与形参的解构赋值" class="header-anchor">#</a> （3）实参与形参的解构赋值</h3> <p>实参到形参的传递默认采用位置对象的形式，在其他语言中还常常有以指定名字的方式（譬如python）：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>first<span class="token punctuation">,</span> second<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span>
func<span class="token punctuation">(</span>first<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> second<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>在JavaScript中我们使用<code>解构赋值</code>的方式达到更强大的效果，除了形参实参的传递，解构赋值也能用在其他需要赋值的情形下。</p> <p>主要分为对象的解构和数组的解构：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 对象解构</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">,</span> z</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                
<span class="token comment">// 数组解构</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token operator">...</span>coords<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span>rest</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>注意上面的函数参数定义的方式和形参使用的方式相同。
<code>对象解构</code>的使用场景是当需要传递一个对象的多个参数时，可以保证知道这个对象都有哪些属性是可用的。
<code>数组解构</code>的使用场景是当实参数量不确定，又想在函数体中能全部获取到时。因为尽管调用一个函数时传递多余的参数并不会引发错误，但是这个传递的实参也无法获取到。</p></div> <h2 id="_4、函数属性"><a href="#_4、函数属性" class="header-anchor">#</a> 4、函数属性</h2> <p>函数是一种对象，意味着也可以有自己的属性，函数本身是无状态的，所以可以把函数属性当作一种共享的静态数据，通过定义全局变量也能达到相同的效果，但保存为自己的属性在语义上更合理。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
f<span class="token punctuation">.</span>counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_5、闭包"><a href="#_5、闭包" class="header-anchor">#</a> 5、闭包</h2> <p>闭包是js的一种机制，即<strong>函数与作用域组合起来解析函数变量的机制</strong>，而不是什么功能。闭包提供了一些特性，有时候也会带来不便和困惑，理解它是十分重要的。</p> <p>JavaScript使用<code>词法作用域</code>（lexical scoping），这是闭包产生的根本原因，事实上大部分语言都是用词法作用域，<strong>即函数执行时使用的是定义函数时生效的变量作用域，而不是调用函数时生效的变量作用域</strong>。但为什么其他语言就不会有闭包的考量？并非其他语言不存在闭包，闭包无处不在，只有在js环境下闭包机制会产生意想不到的效果，这在嵌套函数中十分常见，因为嵌套函数存在时，我们不得不考虑一种函数的定义和调用时在不同作用域的情形：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> scope <span class="token operator">=</span> <span class="token string">&quot;global scope&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">checkscope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> scope <span class="token operator">=</span> <span class="token string">&quot;local scope&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> scope<span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token keyword">return</span> f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">checkscope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// localscope</span>
</code></pre></div><p>这里的<code>checkscope</code>函数的返回值是<code>f</code>函数，在把<code>f</code>作为函数调用时，它使用的变量来自于定义它的环境中，就像是它记忆了自己出生时的环境。函数本身是无状态的，由于闭包的存在，它看起来好像也能储存一些状态，这就是闭包的影响。</p> <h2 id="_6、函数属性、方法"><a href="#_6、函数属性、方法" class="header-anchor">#</a> 6、函数属性、方法</h2> <h3 id="_1-属性"><a href="#_1-属性" class="header-anchor">#</a> （1）属性</h3> <h4 id="length"><a href="#length" class="header-anchor">#</a> length</h4> <p>只读属性，返回函数的元数，即形参个数。</p> <h4 id="name"><a href="#name" class="header-anchor">#</a> name</h4> <p>只读属性，表示函数定义时使用的属性。</p> <h4 id="prototype"><a href="#prototype" class="header-anchor">#</a> prototype</h4> <p>除箭头函数外，所有函数都有这个属性。</p> <h3 id="_2-方法"><a href="#_2-方法" class="header-anchor">#</a> （2）方法</h3> <h4 id="call"><a href="#call" class="header-anchor">#</a> call()</h4> <p>把函数绑定到其他对象上调用一次。此时函数的<code>this</code>的指向变为该对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>otherO<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>后面的参数表示传入函数的实参。</p> <h4 id="apply"><a href="#apply" class="header-anchor">#</a> apply()</h4> <p>和<code>call()</code>一样，只是传入的实参以数组的形式提供。</p> <h4 id="bind"><a href="#bind" class="header-anchor">#</a> bind()</h4> <p>区别于前面的<code>apply()</code>和<code>call()</code>只能临时绑定调用一次，<code>bind()</code>绑定返回一个函数，通过返回的函数可以多次调用具有绑定效果的函数。</p> <blockquote><p>箭头函数的this指向不可变，上面几个方法都无法改变箭头函数中this的指向。</p></blockquote> <p>除了把函数绑定到对象，bind()还能提供<code>柯里化</code>的效果，即绑定对象时把参数也传过去，这时的参数也和函数绑定了起来。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span>
<span class="token keyword">let</span> succ <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">succ</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 3</span>
</code></pre></div><blockquote><p>截止到目前，js的基础语法已经介绍完毕。</p> <p>然而事实上js的新特性（利于类、异步编程和元编程等）已经成为了真正的标准而被广泛应用，同时掌握js在浏览器中的常用API及在node下的生态也是十分必要的，这些内容都会在后面的章节一一介绍。</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/topics/js/array.html" class="prev">
        第3章 数组
      </a></span> <span class="next"><a href="/topics/js/class.html">
        第5章 类
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3e77bb48.js" defer></script><script src="/assets/js/2.e6646181.js" defer></script><script src="/assets/js/26.77f5ed97.js" defer></script>
  </body>
</html>
